<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <record model="ir.ui.view" id="account_invoice_custom_view">
            <field name="name">Facturas con retencion</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_invoice_sent']" position="after">
                        <button name="action_create_sale_withhold_wizard" string="Agregar Rentencion" type="object" class="btn-primary"  attrs="{'invisible': ['|', '|', ('state', '!=', 'posted'), ('payment_state', 'not in', ('not_paid', 'partial')), ('move_type', 'not in', ('out_invoice', 'out_refund','out_receipt'))]}"/>
                </xpath>
                <xpath expr="//field[@name='payment_id']" position="after">
                    <field name="l10n_ec_withhold_ids" invisible='1' />
                </xpath>
                <xpath expr="//button[@name='action_view_debit_notes']" position="after">
                    <button 
                        string="Ver RetenciÃ³n" 
                        name="action_show_l10n_ec_withholds"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-file-text-o"
                        attrs="{'invisible':[('l10n_ec_withhold_ids', '=', 0)]}"
                        >
                    </button>
                </xpath>
            </field>
        </record>
    </data>
</odoo>